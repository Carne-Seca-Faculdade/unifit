<main>
  <div class="flex items-center justify-between gap-2 mb-6">
    <h1 class="text-2xl font-semibold text-gray-800">{{ workout.name }}</h1>
    <div class="flex gap-2">
      <p-button
        label="Adicionar Exercício"
        size="small"
        icon="pi pi-plus"
        iconPos="right"
        (click)="showExerciseDialog()"
      ></p-button>
      <p-button
        label="Editar Treino"
        size="small"
        icon="pi pi-pencil"
        iconPos="right"
        (click)="showEditDialog()"
      ></p-button>
      <p-button
        label="Deletar Treino"
        size="small"
        icon="pi pi-trash"
        iconPos="right"
        (click)="showDeleteDialog()"
      ></p-button>
    </div>
  </div>

  <div class="mb-6">
    <h2 class="text-xl font-semibold text-gray-700">Descrição</h2>
    <p class="text-gray-600">{{ workout.description }}</p>
    <p class="text-gray-600">Duração: {{ workout.duration }} minutos</p>
  </div>

  <h2 class="mb-4 text-xl font-semibold text-gray-700">Exercícios</h2>
  <app-exercise-list [exercises]="workout.exercises"></app-exercise-list>

  <p-dialog
    header="Adicionar Exercício"
    [modal]="true"
    [(visible)]="exerciseDialogVisible"
    [style]="{ width: '30rem' }"
    draggable="false"
  >
    <span class="block mb-4 text-gray-600"
      >Preencha as informações do exercício.</span
    >

    <div class="space-y-4">
      <div class="flex items-center">
        <label for="exerciseTitle" class="w-full font-semibold"
          >Título do Exercício</label
        >
        <input
          type="text"
          pInputText
          id="exerciseTitle"
          autocomplete="off"
          [(ngModel)]="newExercise.name"
        />
      </div>

      <div class="flex items-center">
        <label for="exerciseDescription" class="w-full font-semibold"
          >Descrição</label
        >
        <input
          type="text"
          id="exerciseDescription"
          pInputText
          autocomplete="off"
          [(ngModel)]="newExercise.description"
        />
      </div>

      <div class="flex items-center">
        <label for="exerciseSets" class="w-full font-semibold">Séries</label>
        <p-inputNumber
          id="exerciseSets"
          mode="decimal"
          [min]="1"
          [(ngModel)]="newExercise.sets"
          autocomplete="off"
        />
      </div>

      <div class="flex items-center">
        <label for="exerciseReps" class="w-full font-semibold"
          >Repetições</label
        >
        <p-inputNumber
          id="exerciseReps"
          mode="decimal"
          [min]="1"
          [(ngModel)]="newExercise.reps"
          autocomplete="off"
        />
      </div>
    </div>

    <div class="flex justify-end gap-2 mt-4">
      <p-button
        label="Cancelar"
        severity="secondary"
        (click)="hideExerciseDialog()"
      ></p-button>
      <p-button label="Adicionar" (click)="saveExercise()"></p-button>
    </div>
  </p-dialog>

  <p-dialog
    header="Editar Treino"
    [modal]="true"
    [(visible)]="editDialogVisible"
    [style]="{ width: '30rem' }"
    draggable="false"
  >
    <span class="block mb-4 text-gray-600"
      >Atualize as informações do treino.</span
    >

    <div class="space-y-4">
      <div class="flex items-center">
        <label for="editName" class="w-full font-semibold">Nome</label>
        <input
          type="text"
          pInputText
          id="editName"
          autocomplete="off"
          [(ngModel)]="editWorkout.name"
        />
      </div>

      <div class="flex items-center">
        <label for="editDescription" class="w-full font-semibold"
          >Descrição</label
        >
        <input
          type="text"
          id="editDescription"
          pInputText
          autocomplete="off"
          [(ngModel)]="editWorkout.description"
        />
      </div>

      <div class="flex items-center">
        <label for="editDuration" class="w-full font-semibold"
          >Duração (min)</label
        >
        <p-inputNumber
          id="editDuration"
          mode="decimal"
          [min]="0"
          [(ngModel)]="editWorkout.duration"
          autocomplete="off"
        />
      </div>
    </div>

    <div class="flex justify-end gap-2 mt-4">
      <p-button
        label="Cancelar"
        severity="secondary"
        (click)="hideEditDialog()"
      ></p-button>
      <p-button label="Salvar" (click)="saveWorkout()"></p-button>
    </div>
  </p-dialog>

  <p-dialog
    header="Confirmar Deletar"
    [modal]="true"
    [(visible)]="deleteDialogVisible"
    [style]="{ width: '30rem' }"
    draggable="false"
  >
    <span class="block mb-4 text-gray-600">
      Você tem certeza que deseja deletar este treino?
    </span>

    <div class="flex justify-end gap-2 mt-4">
      <p-button
        label="Cancelar"
        severity="secondary"
        (click)="hideDeleteDialog()"
      ></p-button>
      <p-button label="Deletar" (click)="deleteWorkout()"></p-button>
    </div>
  </p-dialog>
</main>
